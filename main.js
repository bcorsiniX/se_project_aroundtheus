!function(){"use strict";class e{constructor(e,t){this._formElement=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButton=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputList=this._formElement.querySelectorAll(e.inputSelector)}_showInputError(e){let t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){let t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){this._inputList.forEach((e=>{if(!e.validity.valid)return e}))}toggleButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}resetValidation(){this.toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t,n){this.name=e.name,this.link=e.link,this._cardSelector=t,this._handleImageClick=n}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeIcon())),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard())),this._element.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick(this.name,this.link)}))}_handleLikeIcon(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._element.remove()}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._element=this._getTemplate(),this._element.querySelector(".card__image").src=this.link,this._element.querySelector(".card__image").alt=this.name,this._element.querySelector(".card__title").textContent=this.name,this._setEventListeners(),this._element}}class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("click",this._handleClickOverlay),document.addEventListener("keydown",this._closeModalEsc)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("click",this._handleClickOverlay),document.removeEventListener("keydown",this._closeModalEsc)}_closeModalEsc=e=>{"Escape"===e.key&&this.close()};_handleClickOverlay=e=>{e.target===this._popupElement&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close()))}}class s extends n{constructor(e,t){let{popupSelector:n}=e;super({popupSelector:n}),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".modal__form"),this._inputValues=this._form.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputValues.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._form.reset()})),super.setEventListeners()}}const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=document.querySelector("#profile-edit-button"),r=document.forms["modal-form"],l=document.querySelector("#newPlaceButton"),a=document.forms["newPlaceModal-form"],c=(document.querySelector("#imageModal"),document.querySelector("#profile-name-input")),u=document.querySelector("#profile-description-input");function m(e){const n=new t(e,"#card-template",d).getView();return _.addItem(n),n}function d(e,t){v.open(e,t)}const _=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._container=document.querySelector(t),this._renderer=s}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:m},"#cards-list"),p=new s({popupSelector:"#profileEditModal"},(function(e){S.setUserInfo(e),p.close()})),h=new e(i,r),E=new e(i,a),S=new class{constructor(e){let{nameSelector:t,descriptionSelector:n}=e;this._descriptionElement=document.querySelector(n),this._nameElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent.trim(),description:this._descriptionElement.textContent.trim()}}setUserInfo(e){this._nameElement.textContent=e.title,this._descriptionElement.textContent=e.description}}({nameSelector:"#profile-name",descriptionSelector:"#profile-description"}),v=new class extends n{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._popupElement,this._image=document.querySelector(".modal__image"),this._caption=document.querySelector(".modal__caption")}open(e,t){this._image.src=t,this._image.alt=e,this._caption.textContent=e,super.open()}}({popupSelector:"#imageModal"}),f=new s({popupSelector:"#newPlaceModal"},(function(e){m({name:e.title,link:e.link}),f.close()}));_.renderItems(),h.enableValidation(),E.enableValidation(),v.setEventListeners(),p.setEventListeners(),f.setEventListeners(),l.addEventListener("click",(()=>{f.open(),E.toggleButtonState()})),o.addEventListener("click",(()=>{const e=S.getUserInfo();c.value=e.name,u.value=e.description,p.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzFCM0IsRUFBaUJQLE1BQVFxQyxFQUFTekUsS0FDbEM0QyxFQUF3QlIsTUFBUXFDLEVBQVNELFlBQ3pDWixFQUFpQnhDLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtNS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy01Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLTUvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLTUvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtNS8uL3NyYy9wYWdlcy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy01Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtNS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy01Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy01Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBvcHRpb25zLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBvcHRpb25zLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob3B0aW9ucy5pbnB1dFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGxldCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBsZXQgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICByZXR1cm4gaW5wdXQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5saW5rID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VJY29uKCkpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKSk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMubmFtZSwgdGhpcy5saW5rKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNyYyA9IHRoaXMubGluaztcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLm5hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrT3ZlcmxheSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZU1vZGFsRXNjKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tPdmVybGF5KTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlTW9kYWxFc2MpO1xyXG4gIH1cclxuXHJcbiAgX2Nsb3NlTW9kYWxFc2MgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlQ2xpY2tPdmVybGF5ID0gKGUpID0+IHtcclxuICAgIGlmIChlLnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0sIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXREYXRhID0ge307XHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dERhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0RGF0YTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuLi9pbmRleC5qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmREYXRhID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBvcHRpb25zID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcIm1vZGFsLWZvcm1cIl07XHJcbmV4cG9ydCBjb25zdCBuZXdQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3UGxhY2VCdXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBuZXdQbGFjZU1vZGFsRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wibmV3UGxhY2VNb2RhbC1mb3JtXCJdO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2VNb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuIiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvclwiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCB7XHJcbiAgY2FyZERhdGEsXHJcbiAgb3B0aW9ucyxcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgbmV3UGxhY2VCdXR0b24sXHJcbiAgbmV3UGxhY2VNb2RhbEZvcm0sXHJcbiAgcHJvZmlsZU5hbWVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxufSBmcm9tIFwiLi4vcGFnZXMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spLmdldFZpZXcoKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG4gIHJldHVybiBjYXJkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0VmFsdWVzKTtcclxuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU5ld1BsYWNlU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgY29uc3QgY2FyZERhdGEgPSB7IG5hbWU6IGlucHV0VmFsdWVzLnRpdGxlLCBsaW5rOiBpbnB1dFZhbHVlcy5saW5rIH07XHJcbiAgcmVuZGVyQ2FyZChjYXJkRGF0YSk7XHJcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluaykge1xyXG4gIHBvcHVwV2l0aEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgeyBpdGVtczogY2FyZERhdGEsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXHJcbiAgXCIjY2FyZHMtbGlzdFwiXHJcbik7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZUVkaXRNb2RhbFwiLFxyXG4gIH0sXHJcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgcHJvZmlsZUVkaXRGb3JtKTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIG5ld1BsYWNlTW9kYWxGb3JtKTtcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS1uYW1lXCIsXHJcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiLFxyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHsgcG9wdXBTZWxlY3RvcjogXCIjaW1hZ2VNb2RhbFwiIH0pO1xyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBcIiNuZXdQbGFjZU1vZGFsXCIsXHJcbiAgfSxcclxuICBoYW5kbGVOZXdQbGFjZVN1Ym1pdFxyXG4pO1xyXG5cclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxubmV3UGxhY2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxufSk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmRlc2NyaXB0aW9uO1xyXG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LnRyaW0oKSxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudC50cmltKCksXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odXNlckRhdGEpIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdXNlckRhdGEudGl0bGU7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50O1xyXG4gICAgdGhpcy5faW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX2NhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9mb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2VFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJmb3JFYWNoIiwiaW5wdXQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJfZW5hYmxlU3VibWl0QnV0dG9uIiwicmVzZXRWYWxpZGF0aW9uIiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIkNhcmQiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJuYW1lIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9lbGVtZW50IiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJ0b2dnbGUiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3Iiwic3JjIiwiYWx0IiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiX2hhbmRsZUNsaWNrT3ZlcmxheSIsIl9jbG9zZU1vZGFsRXNjIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwidGFyZ2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9pbnB1dFZhbHVlcyIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0RGF0YSIsInZhbHVlIiwicmVzZXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0Rm9ybSIsImZvcm1zIiwibmV3UGxhY2VCdXR0b24iLCJuZXdQbGFjZU1vZGFsRm9ybSIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInJlbmRlckNhcmQiLCJjYXJkIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwicG9wdXBXaXRoSW1hZ2UiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfY29udGFpbmVyIiwiX3JlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJlZGl0UHJvZmlsZVBvcHVwIiwiaW5wdXRWYWx1ZXMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJfbmFtZUVsZW1lbnQiLCJnZXRVc2VySW5mbyIsInRyaW0iLCJkZXNjcmlwdGlvbiIsInVzZXJEYXRhIiwidGl0bGUiLCJfaW1hZ2UiLCJfY2FwdGlvbiIsIm5ld0NhcmRQb3B1cCJdLCJzb3VyY2VSb290IjoiIn0=