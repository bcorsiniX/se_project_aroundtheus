!function(){"use strict";class e{constructor(e,t){this._formElement=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputList=this._formElement.querySelectorAll(e.inputSelector),this._submitButton=this._formElement.querySelectorAll(e.submitButtonSelector)}_showInputError(e){let t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){let t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return Array.from(this._inputList).some((e=>!e.validity.valid))}toggleButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}resetValidation(){this.toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t,n){this.name=e.name,this.link=e.link,this._cardSelector=t,this._handleImageClick=n}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeIcon())),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard())),this._element.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick(this.name,this.link)}))}_handleLikeIcon(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._element.remove()}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._element=this._getTemplate(),this._element.querySelector(".card__image").src=this.link,this._element.querySelector(".card__image").alt=this.name,this._element.querySelector(".card__title").textContent=this.name,this._setEventListeners(),this._element}}class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("click",this._handleClickOverlay),document.addEventListener("keydown",this._closeModalEsc)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("click",this._handleClickOverlay),document.removeEventListener("keydown",this._closeModalEsc)}_closeModalEsc=e=>{"Escape"===e.key&&this.close()};_handleClickOverlay=e=>{e.target===this._popupElement&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close()))}}class s extends n{constructor(e,t){let{popupSelector:n}=e;super({popupSelector:n}),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".modal__form"),this._inputValues=this._form.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputValues.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._form.reset()})),super.setEventListeners()}}const o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},i=document.querySelector("#profile-edit-button"),r=document.forms["modal-form"],l=document.querySelector("#newPlaceButton"),a=document.forms["newPlaceModal-form"],c=(document.querySelector("#imageModal"),document.querySelector("#profile-name-input")),u=document.querySelector("#profile-description-input");function m(e){const n=new t(e,"#card-template",d).getView();return _.addItem(n),n}function d(e,t){v.open(e,t)}fetch("https://jsonplaceholder.typicode.com/todos/1").then((e=>e.json())).then((e=>console.log(e)));const _=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._container=document.querySelector(t),this._renderer=s}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:m},"#cards-list"),p=new s({popupSelector:"#profileEditModal"},(function(e){E.setUserInfo(e),p.close()})),h=new e(o,r),S=new e(o,a),E=new class{constructor(e){let{nameSelector:t,descriptionSelector:n}=e;this._descriptionElement=document.querySelector(n),this._nameElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent.trim(),description:this._descriptionElement.textContent.trim()}}setUserInfo(e){this._nameElement.textContent=e.title,this._descriptionElement.textContent=e.description}}({nameSelector:"#profile-name",descriptionSelector:"#profile-description"}),v=new class extends n{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._popupElement,this._image=document.querySelector(".modal__image"),this._caption=document.querySelector(".modal__caption")}open(e,t){this._image.src=t,this._image.alt=e,this._caption.textContent=e,super.open()}}({popupSelector:"#imageModal"}),f=new s({popupSelector:"#newPlaceModal"},(function(e){m({name:e.title,link:e.link}),f.close()}));_.renderItems(),h.enableValidation(),S.enableValidation(),v.setEventListeners(),p.setEventListeners(),f.setEventListeners(),l.addEventListener("click",(()=>{f.open(),S.toggleButtonState()})),i.addEventListener("click",(()=>{const e=E.getUserInfo();c.value=e.name,u.value=e.description,p.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQWUsTUFBTUEsRUFDbkJDLFdBQUFBLENBQVlDLEVBQVNDLEdBQ25CQyxLQUFLQyxhQUFlRixFQUNwQkMsS0FBS0UsY0FBZ0JKLEVBQVFLLGFBQzdCSCxLQUFLSSxlQUFpQk4sRUFBUU8sY0FDOUJMLEtBQUtNLHNCQUF3QlIsRUFBUVMscUJBQ3JDUCxLQUFLUSxxQkFBdUJWLEVBQVFXLG9CQUNwQ1QsS0FBS1UsaUJBQW1CWixFQUFRYSxnQkFDaENYLEtBQUtZLFlBQWNkLEVBQVFlLFdBQzNCYixLQUFLYyxXQUFhZCxLQUFLQyxhQUFhYyxpQkFBaUJqQixFQUFRTyxlQUM3REwsS0FBS2dCLGNBQWdCaEIsS0FBS0MsYUFBYWMsaUJBQ3JDakIsRUFBUVMscUJBRVosQ0FFQVUsZUFBQUEsQ0FBZ0JDLEdBQ2QsSUFBSUMsRUFBaUJuQixLQUFLQyxhQUFhbUIsY0FDckMsSUFBSUYsRUFBYUcsWUFFbkJILEVBQWFJLFVBQVVDLElBQUl2QixLQUFLVSxrQkFDaENTLEVBQWVLLFlBQWNOLEVBQWFPLGtCQUMxQ04sRUFBZUcsVUFBVUMsSUFBSXZCLEtBQUtZLFlBQ3BDLENBRUFjLGVBQUFBLENBQWdCUixHQUNkLElBQUlDLEVBQWlCbkIsS0FBS0MsYUFBYW1CLGNBQ3JDLElBQUlGLEVBQWFHLFlBRW5CSCxFQUFhSSxVQUFVSyxPQUFPM0IsS0FBS1Usa0JBQ25DUyxFQUFlRyxVQUFVSyxPQUFPM0IsS0FBS1ksYUFDckNPLEVBQWVLLFlBQWMsRUFDL0IsQ0FFQUksbUJBQUFBLENBQW9CVixHQUNsQixJQUFLQSxFQUFhVyxTQUFTQyxNQUN6QixPQUFPOUIsS0FBS2lCLGdCQUFnQkMsR0FFOUJsQixLQUFLMEIsZ0JBQWdCUixFQUN2QixDQUVBYSxnQkFBQUEsR0FDRSxPQUFPQyxNQUFNQyxLQUFLakMsS0FBS2MsWUFBWW9CLE1BQU1DLElBQVdBLEVBQU1OLFNBQVNDLE9BQ3JFLENBRUFNLGlCQUFBQSxHQUNNcEMsS0FBSytCLG1CQUNQL0IsS0FBS3FDLHNCQUdQckMsS0FBS3NDLHFCQUNQLENBRUFDLGVBQUFBLEdBQ0V2QyxLQUFLb0Msb0JBQ0xwQyxLQUFLYyxXQUFXMEIsU0FBU3RCLElBQ3ZCbEIsS0FBSzBCLGdCQUFnQlIsRUFBYSxHQUV0QyxDQUVBb0IsbUJBQUFBLEdBQ0V0QyxLQUFLZ0IsY0FBY00sVUFBVUssT0FBTzNCLEtBQUtRLHNCQUN6Q1IsS0FBS2dCLGNBQWN5QixVQUFXLENBQ2hDLENBRUFKLG1CQUFBQSxHQUNFckMsS0FBS2dCLGNBQWNNLFVBQVVDLElBQUl2QixLQUFLUSxzQkFDdENSLEtBQUtnQixjQUFjeUIsVUFBVyxDQUNoQyxDQUVBQyxrQkFBQUEsR0FDRTFDLEtBQUtnQixjQUFnQmhCLEtBQUtDLGFBQWFtQixjQUNyQ3BCLEtBQUtNLHVCQUVQTixLQUFLYyxXQUFXMEIsU0FBU3RCLElBQ3ZCQSxFQUFheUIsaUJBQWlCLFNBQVMsS0FDckMzQyxLQUFLNEIsb0JBQW9CVixHQUN6QmxCLEtBQUtvQyxtQkFBbUIsR0FDeEIsR0FFTixDQUVBUSxnQkFBQUEsR0FDRTVDLEtBQUtDLGFBQWEwQyxpQkFBaUIsVUFBV0UsSUFDNUNBLEVBQUVDLGdCQUFnQixJQUVwQjlDLEtBQUswQyxvQkFDUCxFQ3RGYSxNQUFNSyxFQUNuQmxELFdBQUFBLENBQVltRCxFQUFVQyxFQUFjQyxHQUNsQ2xELEtBQUttRCxLQUFPSCxFQUFTRyxLQUNyQm5ELEtBQUtvRCxLQUFPSixFQUFTSSxLQUNyQnBELEtBQUtxRCxjQUFnQkosRUFDckJqRCxLQUFLc0Qsa0JBQW9CSixDQUMzQixDQUVBUixrQkFBQUEsR0FDRTFDLEtBQUt1RCxTQUNGbkMsY0FBYyxzQkFDZHVCLGlCQUFpQixTQUFTLElBQU0zQyxLQUFLd0Qsb0JBRXhDeEQsS0FBS3VELFNBQ0ZuQyxjQUFjLHdCQUNkdUIsaUJBQWlCLFNBQVMsSUFBTTNDLEtBQUt5RCxzQkFFeEN6RCxLQUFLdUQsU0FDRm5DLGNBQWMsZ0JBQ2R1QixpQkFBaUIsU0FBUyxLQUN6QjNDLEtBQUtzRCxrQkFBa0J0RCxLQUFLbUQsS0FBTW5ELEtBQUtvRCxLQUFLLEdBRWxELENBRUFJLGVBQUFBLEdBQ0V4RCxLQUFLdUQsU0FDRm5DLGNBQWMsc0JBQ2RFLFVBQVVvQyxPQUFPLDJCQUN0QixDQUVBRCxpQkFBQUEsR0FDRXpELEtBQUt1RCxTQUFTNUIsUUFDaEIsQ0FFQWdDLFlBQUFBLEdBQ0UsT0FBT0MsU0FDSnhDLGNBQWNwQixLQUFLcUQsZUFDbkJRLFFBQVF6QyxjQUFjLFNBQ3RCMEMsV0FBVSxFQUNmLENBRUFDLE9BQUFBLEdBU0UsT0FSQS9ELEtBQUt1RCxTQUFXdkQsS0FBSzJELGVBRXJCM0QsS0FBS3VELFNBQVNuQyxjQUFjLGdCQUFnQjRDLElBQU1oRSxLQUFLb0QsS0FDdkRwRCxLQUFLdUQsU0FBU25DLGNBQWMsZ0JBQWdCNkMsSUFBTWpFLEtBQUttRCxLQUN2RG5ELEtBQUt1RCxTQUFTbkMsY0FBYyxnQkFBZ0JJLFlBQWN4QixLQUFLbUQsS0FFL0RuRCxLQUFLMEMscUJBRUUxQyxLQUFLdUQsUUFDZCxFQ25EYSxNQUFNVyxFQUNuQnJFLFdBQUFBLENBQVdzRSxHQUFvQixJQUFuQixjQUFFQyxHQUFlRCxFQUMzQm5FLEtBQUtxRSxjQUFnQlQsU0FBU3hDLGNBQWNnRCxHQUM1Q3BFLEtBQUtzRSxhQUFldEUsS0FBS3FFLGNBQWNqRCxjQUNyQyx1QkFFSixDQUVBbUQsSUFBQUEsR0FDRXZFLEtBQUtxRSxjQUFjL0MsVUFBVUMsSUFBSSxnQkFDakNxQyxTQUFTakIsaUJBQWlCLFFBQVMzQyxLQUFLd0UscUJBQ3hDWixTQUFTakIsaUJBQWlCLFVBQVczQyxLQUFLeUUsZUFDNUMsQ0FFQUMsS0FBQUEsR0FDRTFFLEtBQUtxRSxjQUFjL0MsVUFBVUssT0FBTyxnQkFDcENpQyxTQUFTZSxvQkFBb0IsUUFBUzNFLEtBQUt3RSxxQkFDM0NaLFNBQVNlLG9CQUFvQixVQUFXM0UsS0FBS3lFLGVBQy9DLENBRUFBLGVBQWtCNUIsSUFDRixXQUFWQSxFQUFFK0IsS0FDSjVFLEtBQUswRSxPQUNQLEVBR0ZGLG9CQUF1QjNCLElBQ2pCQSxFQUFFZ0MsU0FBVzdFLEtBQUtxRSxlQUNwQnJFLEtBQUswRSxPQUNQLEVBR0ZJLGlCQUFBQSxHQUNFOUUsS0FBS3NFLGFBQWEzQixpQkFBaUIsU0FBUyxJQUFNM0MsS0FBSzBFLFNBQ3pELEVDaENhLE1BQU1LLFVBQXNCYixFQUN6Q3JFLFdBQUFBLENBQVdzRSxFQUFvQmEsR0FBa0IsSUFBckMsY0FBRVosR0FBZUQsRUFDM0JjLE1BQU0sQ0FBRWIsa0JBQ1JwRSxLQUFLa0Ysa0JBQW9CRixFQUN6QmhGLEtBQUttRixNQUFRbkYsS0FBS3FFLGNBQWNqRCxjQUFjLGdCQUM5Q3BCLEtBQUtvRixhQUFlcEYsS0FBS21GLE1BQU1wRSxpQkFBaUIsZ0JBQ2xELENBRUFzRSxlQUFBQSxHQUNFLE1BQU1DLEVBQVksQ0FBQyxFQUluQixPQUhBdEYsS0FBS29GLGFBQWE1QyxTQUFTTCxJQUN6Qm1ELEVBQVVuRCxFQUFNZ0IsTUFBUWhCLEVBQU1vRCxLQUFLLElBRTlCRCxDQUNULENBRUFSLGlCQUFBQSxHQUNFOUUsS0FBS21GLE1BQU14QyxpQkFBaUIsVUFBV0UsSUFDckNBLEVBQUVDLGlCQUNGOUMsS0FBS2tGLGtCQUFrQmxGLEtBQUtxRixtQkFDNUJyRixLQUFLbUYsTUFBTUssT0FBTyxJQUVwQlAsTUFBTUgsbUJBQ1IsRUN2QkssTUEyQk1oRixFQUFVLENBQ3JCSyxhQUFjLGVBQ2RFLGNBQWUsZ0JBQ2ZFLHFCQUFzQixzQkFDdEJFLG9CQUFxQiw4QkFDckJFLGdCQUFpQiwwQkFDakJFLFdBQVksd0JBR0Q0RSxFQUFvQjdCLFNBQVN4QyxjQUFjLHdCQUMzQ3NFLEVBQWtCOUIsU0FBUytCLE1BQU0sY0FDakNDLEVBQWlCaEMsU0FBU3hDLGNBQWMsbUJBQ3hDeUUsRUFBb0JqQyxTQUFTK0IsTUFBTSxzQkFFbkNHLEdBRGFsQyxTQUFTeEMsY0FBYyxlQUNqQndDLFNBQVN4QyxjQUFjLHdCQUMxQzJFLEVBQTBCbkMsU0FBU3hDLGNBQzlDLDhCQ3ZCRixTQUFTNEUsRUFBV2hELEdBQ2xCLE1BQU1pRCxFQUFPLElBQUlsRCxFQUFLQyxFQUFVLGlCQUFrQkUsR0FBa0JhLFVBRXBFLE9BREFtQyxFQUFZQyxRQUFRRixHQUNiQSxDQUNULENBYUEsU0FBUy9DLEVBQWlCQyxFQUFNQyxHQUM5QmdELEVBQWU3QixLQUFLcEIsRUFBTUMsRUFDNUIsQ0F2QkFpRCxNQUFNLGdEQUNIQyxNQUFNQyxHQUFhQSxFQUFTQyxTQUM1QkYsTUFBTUUsR0FBU0MsUUFBUUMsSUFBSUYsS0F1QjlCLE1BQU1OLEVBQWMsSUMzQ0wsTUFDYnJHLFdBQUFBLENBQVdzRSxFQUFzQndDLEdBQW1CLElBQXhDLE1BQUVDLEVBQUssU0FBRUMsR0FBVTFDLEVBQzdCbkUsS0FBSzhHLE9BQVNGLEVBQ2Q1RyxLQUFLK0csV0FBYW5ELFNBQVN4QyxjQUFjdUYsR0FDekMzRyxLQUFLZ0gsVUFBWUgsQ0FDbkIsQ0FFQUksV0FBQUEsR0FDRWpILEtBQUs4RyxPQUFPdEUsU0FBUzBFLElBQ25CbEgsS0FBS2dILFVBQVVFLEVBQUssR0FFeEIsQ0FFQWYsT0FBQUEsQ0FBUWdCLEdBQ05uSCxLQUFLK0csV0FBV0ssUUFBUUQsRUFDMUIsR0Q2QkEsQ0FBRVAsTUQxQ29CLENBQ3RCLENBQ0V6RCxLQUFNLGtCQUNOQyxLQUFNLHNHQUVSLENBQ0VELEtBQU0sY0FDTkMsS0FBTSx5R0FFUixDQUNFRCxLQUFNLGlCQUNOQyxLQUFNLDRHQUVSLENBQ0VELEtBQU0sVUFDTkMsS0FBTSxxR0FFUixDQUNFRCxLQUFNLHdCQUNOQyxLQUFNLHFHQUVSLENBQ0VELEtBQU0saUJBQ05DLEtBQU0sbUdDbUJXeUQsU0FBVWIsR0FDN0IsZUFHSXFCLEVBQW1CLElBQUl0QyxFQUMzQixDQUNFWCxjQUFlLHNCQXRCbkIsU0FBaUNrRCxHQUMvQkMsRUFBU0MsWUFBWUYsR0FDckJELEVBQWlCM0MsT0FDbkIsSUF3Qk0rQyxFQUFvQixJQUFJN0gsRUFBY0UsRUFBUzRGLEdBQy9DZ0MsRUFBbUIsSUFBSTlILEVBQWNFLEVBQVMrRixHQUM5QzBCLEVBQVcsSUV6REYsTUFDYjFILFdBQUFBLENBQVdzRSxHQUF3QyxJQUF2QyxhQUFFd0QsRUFBWSxvQkFBRUMsR0FBcUJ6RCxFQUMvQ25FLEtBQUs2SCxvQkFBc0JqRSxTQUFTeEMsY0FBY3dHLEdBQ2xENUgsS0FBSzhILGFBQWVsRSxTQUFTeEMsY0FBY3VHLEVBQzdDLENBRUFJLFdBQUFBLEdBQ0UsTUFBTyxDQUNMNUUsS0FBTW5ELEtBQUs4SCxhQUFhdEcsWUFBWXdHLE9BQ3BDQyxZQUFhakksS0FBSzZILG9CQUFvQnJHLFlBQVl3RyxPQUV0RCxDQUVBUixXQUFBQSxDQUFZVSxHQUNWbEksS0FBSzhILGFBQWF0RyxZQUFjMEcsRUFBU0MsTUFDekNuSSxLQUFLNkgsb0JBQW9CckcsWUFBYzBHLEVBQVNELFdBQ2xELEdGeUM0QixDQUM1Qk4sYUFBYyxnQkFDZEMsb0JBQXFCLHlCQUdqQnhCLEVBQWlCLElHNURSLGNBQTZCbEMsRUFDMUNyRSxXQUFBQSxDQUFXc0UsR0FBb0IsSUFBbkIsY0FBRUMsR0FBZUQsRUFDM0JjLE1BQU0sQ0FBRWIsa0JBQ1JwRSxLQUFLcUUsY0FDTHJFLEtBQUtvSSxPQUFTeEUsU0FBU3hDLGNBQWMsaUJBQ3JDcEIsS0FBS3FJLFNBQVd6RSxTQUFTeEMsY0FBYyxrQkFDekMsQ0FFQW1ELElBQUFBLENBQUtwQixFQUFNQyxHQUNUcEQsS0FBS29JLE9BQU9wRSxJQUFNWixFQUNsQnBELEtBQUtvSSxPQUFPbkUsSUFBTWQsRUFDbEJuRCxLQUFLcUksU0FBUzdHLFlBQWMyQixFQUM1QjhCLE1BQU1WLE1BQ1IsR0grQ3dDLENBQUVILGNBQWUsZ0JBQ3JEa0UsRUFBZSxJQUFJdkQsRUFDdkIsQ0FDRVgsY0FBZSxtQkFoQ25CLFNBQThCa0QsR0FFNUJ0QixFQURpQixDQUFFN0MsS0FBTW1FLEVBQVlhLE1BQU8vRSxLQUFNa0UsRUFBWWxFLE9BRTlEa0YsRUFBYTVELE9BQ2YsSUFpQ0F3QixFQUFZZSxjQUVaUSxFQUFrQjdFLG1CQUVsQjhFLEVBQWlCOUUsbUJBRWpCd0QsRUFBZXRCLG9CQUVmdUMsRUFBaUJ2QyxvQkFFakJ3RCxFQUFheEQsb0JBRWJjLEVBQWVqRCxpQkFBaUIsU0FBUyxLQUN2QzJGLEVBQWEvRCxPQUNibUQsRUFBaUJ0RixtQkFBbUIsSUFHdENxRCxFQUFrQjlDLGlCQUFpQixTQUFTLEtBQzFDLE1BQU11RixFQUFXWCxFQUFTUSxjQUMxQmpDLEVBQWlCUCxNQUFRMkMsRUFBUy9FLEtBQ2xDNEMsRUFBd0JSLE1BQVEyQyxFQUFTRCxZQUN6Q1osRUFBaUI5QyxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLTUvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtNS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy01Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy01Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLTUvLi9zcmMvcGFnZXMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtNS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLTUvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtNS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtNS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gb3B0aW9ucy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob3B0aW9ucy5pbnB1dFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgIG9wdGlvbnMuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBsZXQgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgbGV0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2lucHV0TGlzdCkuc29tZSgoaW5wdXQpID0+ICFpbnB1dC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMubmFtZSA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICB0aGlzLmxpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUljb24oKSk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5uYW1lLCB0aGlzLmxpbmspO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5saW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFsdCA9IHRoaXMubmFtZTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tPdmVybGF5KTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlTW9kYWxFc2MpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbGlja092ZXJsYXkpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VNb2RhbEVzYyk7XHJcbiAgfVxyXG5cclxuICBfY2xvc2VNb2RhbEVzYyA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVDbGlja092ZXJsYXkgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dERhdGEgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0VmFsdWVzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0RGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXREYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4uL2luZGV4LmpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZERhdGEgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wibW9kYWwtZm9ybVwiXTtcclxuZXhwb3J0IGNvbnN0IG5ld1BsYWNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXdQbGFjZUJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IG5ld1BsYWNlTW9kYWxGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJuZXdQbGFjZU1vZGFsLWZvcm1cIl07XHJcbmV4cG9ydCBjb25zdCBpbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZU1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG4iLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmRcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IHtcclxuICBjYXJkRGF0YSxcclxuICBvcHRpb25zLFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybSxcclxuICBuZXdQbGFjZUJ1dHRvbixcclxuICBuZXdQbGFjZU1vZGFsRm9ybSxcclxuICBwcm9maWxlTmFtZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG59IGZyb20gXCIuLi9wYWdlcy91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmZldGNoKFwiaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3RvZG9zLzFcIilcclxuICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAudGhlbigoanNvbikgPT4gY29uc29sZS5sb2coanNvbikpO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKS5nZXRWaWV3KCk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKTtcclxuICByZXR1cm4gY2FyZDtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcyk7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVOZXdQbGFjZVN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIGNvbnN0IGNhcmREYXRhID0geyBuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSwgbGluazogaW5wdXRWYWx1ZXMubGluayB9O1xyXG4gIHJlbmRlckNhcmQoY2FyZERhdGEpO1xyXG4gIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHsgaXRlbXM6IGNhcmREYXRhLCByZW5kZXJlcjogcmVuZGVyQ2FyZCB9LFxyXG4gIFwiI2NhcmRzLWxpc3RcIlxyXG4pO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IFwiI3Byb2ZpbGVFZGl0TW9kYWxcIixcclxuICB9LFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XHJcbik7XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBuZXdQbGFjZU1vZGFsRm9ybSk7XHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiI3Byb2ZpbGUtbmFtZVwiLFxyXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIixcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7IHBvcHVwU2VsZWN0b3I6IFwiI2ltYWdlTW9kYWxcIiB9KTtcclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgcG9wdXBTZWxlY3RvcjogXCIjbmV3UGxhY2VNb2RhbFwiLFxyXG4gIH0sXHJcbiAgaGFuZGxlTmV3UGxhY2VTdWJtaXRcclxuKTtcclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbm5ld1BsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudC50cmltKCksXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQudHJpbSgpLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLnRpdGxlO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gdXNlckRhdGEuZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudDtcclxuICAgIHRoaXMuX2ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWwiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiQXJyYXkiLCJmcm9tIiwic29tZSIsImlucHV0IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsInJlc2V0VmFsaWRhdGlvbiIsImZvckVhY2giLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiQ2FyZCIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2VsZW1lbnQiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsInRvZ2dsZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJzcmMiLCJhbHQiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsIm9wZW4iLCJfaGFuZGxlQ2xpY2tPdmVybGF5IiwiX2Nsb3NlTW9kYWxFc2MiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJ0YXJnZXQiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0VmFsdWVzIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXREYXRhIiwidmFsdWUiLCJyZXNldCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRGb3JtIiwiZm9ybXMiLCJuZXdQbGFjZUJ1dHRvbiIsIm5ld1BsYWNlTW9kYWxGb3JtIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicmVuZGVyQ2FyZCIsImNhcmQiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJwb3B1cFdpdGhJbWFnZSIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfY29udGFpbmVyIiwiX3JlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJlZGl0UHJvZmlsZVBvcHVwIiwiaW5wdXRWYWx1ZXMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJfbmFtZUVsZW1lbnQiLCJnZXRVc2VySW5mbyIsInRyaW0iLCJkZXNjcmlwdGlvbiIsInVzZXJEYXRhIiwidGl0bGUiLCJfaW1hZ2UiLCJfY2FwdGlvbiIsIm5ld0NhcmRQb3B1cCJdLCJzb3VyY2VSb290IjoiIn0=